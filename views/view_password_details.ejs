<%- include('components/header.ejs'); %>
  
<%- include('components/navbar.ejs'); %>
  
<body>
      
    <div class="container py-5 mr-auto">
         <div class="row">
             <div class="col-md-10 m-auto d-block table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                      <tr>
                        <th scope="col">PASSWORD CATEGORY</th>
                        <th scope="col">PASSWORD DETAILS</th>
                        <th scope="col">CREATED AT</th>
                        <th scope="col">UPDATED AT</th>
                        <th scope="col">ACTIONS</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% if(data.length > 0) { %>
                      <% data.forEach((result) => { %>
                         <tr>
                            <td class="text-capitalize"><%= result.password_cat_name %></td>
                            <td class="text-capitalize"><%= result.password_details %></td>
                            <td><%= result.createdAt.toDateString() %></td>
                            <td><%= result.updatedAt.toDateString() %></td>
                            <td>
                              <a href="/view_password_details/edit/<%= result._id %>"><i class="fa fa-edit action__icon"></i></a> | <a href="/view_password_details/delete/<%= result._id %>"><i class="fas fa-trash-alt action__icon"></i></a>
                            </td>
                         </tr>             
                      <% }) %>
                      <% } %>
                    </tbody>
                  </table>
             </div>
         </div>
          
         <!--  Pagination -->
          <%
           let startLoop = current;
           let diff = pages - current;
           if(diff <=4){
                startLoop = pages - 4;
           } 
           let endLoop =  parseInt(startLoop) + 4;
           if(startLoop <= 0){
               startLoop = 1;
           }
          %>
         <% if (pages > 0) { %>
          <ul class="pagination text-center justify-content-center mt-4">
               <% if (current > 1) { %>
                    <li class="page-item"><a href="/view_password_details/<%= current -1 %>" class="page-link">Prev</a></li>
               <% } %>
               <% for(let i = startLoop; i <= endLoop; i++) { %>
                      <li class="page-item"><a href="/view_password_details/<%= i %>" class="page-link"><%= i %></a></li>
                <% } %>
                <% if (current < pages) { %>
                    <li class="page-item"><a href="/view_password_details/<%= parseInt(current) + 1 %>" class="page-link">Next</a></li>
               <% } %>
          </ul>
        <% } %>
      
    </div>
          
    
  <!-- scripts -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha2/js/bootstrap.bundle.min.js" integrity="sha384-BOsAfwzjNJHrJ8cZidOg56tcQWfp6y72vEJ8xQ9w6Quywb24iOsW913URv1IS4GD" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/js/all.min.js" integrity="sha512-F5QTlBqZlvuBEs9LQPqc1iZv2UMxcVXezbHzomzS6Df4MZMClge/8+gXrKw2fl5ysdk4rWjR0vKS7NNkfymaBQ==" crossorigin="anonymous"></script>
  <!--  -->
  </body>
</html>